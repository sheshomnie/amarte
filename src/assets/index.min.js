(function () {
    if ($('header').length > 0) {
        var docElem = document.documentElement,
            $html = document.querySelector('html'),
            didScroll = false,
            changeHeaderOn = 50;
        function init() {
            window.addEventListener(
                'scroll',
                function (event) {
                    if (!didScroll) {
                        didScroll = true;
                        setTimeout(scrollPage, 5);
                    }
                },
                false
            );
        }

        function scrollPage() {
            var sy = scrollY();
            if (sy >= changeHeaderOn) {
                classie.add($html, 'compressed');
            } else {
                classie.remove($html, 'compressed');
            }
            didScroll = false;
        }
        function scrollY() {
            return window.pageYOffset || docElem.scrollTop;
        }
        init();
    }
})();
/* the Responsive menu script */

var add_toggle_links = function () {
    if ($('.nav-toggle').is(":visible")) {
        if ($(".toggle-link").length > 0) {
        }
        else {
            $('.sub-menu').before('<span class="toggle-link"></span>');
            $('.toggle-link').click(function (e) {
                var $this = $(this);
                $this.toggleClass('active').siblings('ul').slideToggle().toggleClass('active');
            });
        }
    }
    else {
        $('.toggle-link').empty();
    }
}
add_toggle_links();

/*-- Search bar --*/




$(window).bind("resize", add_toggle_links);
$(function () {
    if (-1 != navigator.userAgent.indexOf('MSIE'))
        var detectIEregexp = /MSIE (\d+\.\d+);/;
    else
        var detectIEregexp = /Trident.*rv[ :]*(\d+\.\d+)/;
    if (detectIEregexp.test(navigator.userAgent)) {
        var ieversion = new Number(RegExp.$1);
        12 == ieversion ?
            jQuery('body').addClass('IE12') :
        11 == ieversion ?
            jQuery('body').addClass('IE11') :
        10 == ieversion ?
            jQuery('body').addClass('IE10') :
        9 == ieversion && jQuery('body').addClass('IE9');
    }
    //Search for keywords within the user agent string.  When a match is found, add a corresponding class to the html element and return.  (Inspired by http://stackoverflow.com/a/10137912/114558)
    function addUserAgentClass(keywords) {
        for (var i = 0; i < keywords.length; i++) {
            if (navigator.userAgent.indexOf(keywords[i]) != -1) {
                $('html').addClass(keywords[i].toLowerCase());
                return; //Once we find and process a matching keyword, return to prevent less "specific" classes from being added
            }
        }
    }
    addUserAgentClass(['Chrome', 'Firefox', 'MSIE', 'Safari', 'Opera', 'Mozilla']); //Browsers listed generally from most-specific to least-specific
    addUserAgentClass(['Android', 'iPhone', 'iPad', 'Linux', 'Mac', 'Windows']); //Platforms, also in order of specificity

    $(".home-slider").slick({
        dots: false,
        infinite: true,
        autoplay: true,
        speed: 1000,
        pauseOnHover: false,
        fade: true,
        accessibility: false,
        autoplaySpeed: 6000,
        arrows: true,
        slidesToShow: 1,
        draggable: true,
        centerMode: false,
        useCSS: true,
        slidesToScroll: 1,
        prevArrow: '<div class="prev slick-arrow"><a href="javascript:void(0)">PREVIOUS</a></div>',
        nextArrow: '<div class="next slick-arrow"><a href="javascript:void(0)">NEXT</a></div>',
        customPaging: function (slider, i) {
            return '<a href="javascript:void(0)">' + i + '</a>';
        }
    });

    $(".ingredient-slider").slick({
        dots: false,
        infinite: true,
        autoplay: true,
        speed: 1000,
        pauseOnHover: false,
        fade: true,
        accessibility: false,
        autoplaySpeed: 6000,
        arrows: true,
        slidesToShow: 1,
        draggable: true,
        centerMode: false,
        useCSS: true,
        slidesToScroll: 1,
        prevArrow: '<div class="prev slick-arrow"><a href="javascript:void(0)">PREVIOUS</a></div>',
        nextArrow: '<div class="next slick-arrow"><a href="javascript:void(0)">NEXT</a></div>',
        customPaging: function (slider, i) {
            return '<a href="javascript:void(0)">' + i + '</a>';
        }
    });


    $('.press-slider').slick({
        dots: false,
        infinite: true,
        speed: 500,
        // slide: 'li',
        arrows: true,
        slidesToShow: 3,
        draggable: true,
        accessibility: false,
        useCSS: true,
        slidesToScroll: 1,
        prevArrow: '<div class="prev slick-arrow"><a href="javascript:void(0)">PREVIOUS</a></div>',
        nextArrow: '<div class="next slick-arrow"><a href="javascript:void(0)">NEXT</a></div>',
        customPaging: function (slider, i) {
            return '<a href="#" tabindex="0">' + (i + 1) + '</a>';
        },
        variableWidth: false,
        responsive: [{
            breakpoint: 981,
            settings: {
                slidesToShow: 2,
                slidesToScroll: 2
            }
        },
                     {
                         breakpoint: 767,
                         settings: {
                             slidesToShow: 1,
                             slidesToScroll: 1
                         }
                     }
                    ]
    });

    $(".catalogue-detail-slider").slick({
        dots: false,
        infinite: true,
        autoplay: true,
        speed: 1000,
        pauseOnHover: false,
        fade: true,
        accessibility: false,
        autoplaySpeed: 6000,
        arrows: true,
        slidesToShow: 1,
        draggable: true,
        centerMode: false,
        useCSS: true,
        slidesToScroll: 1,
        prevArrow: '<div class="prev slick-arrow"><a href="javascript:void(0)">PREVIOUS</a></div>',
        nextArrow: '<div class="next slick-arrow"><a href="javascript:void(0)">NEXT</a></div>',
        customPaging: function (slider, i) {
            return '<a href="javascript:void(0)">' + i + '</a>';
        }
    });


    $('.page-header .search-btn').click(function (e) {
        e.preventDefault();
        $('.search-panel').addClass('open');
        return false;
    });

    $('.close-b').on('click', function(e){
        e.preventDefault();
        $('.search-panel').removeClass('open');
        return false;
    });

    $('.glossary-btn .btn').click(function (e) {
        $('.glossary-btn .btn').toggleClass('active');
        $('.glossary-box').slideToggle();
        return false;
    });


    $('.faqs .item .title').click(function () {
        if (!$(this).parent().hasClass('active')) {
            $('.faqs .item').removeClass('active');
            $('.faqs .short-info').slideUp();
            $(this).parent().addClass('active');
            $(this).next().slideDown();
        } else {
            $('.faqs .item').removeClass('active');
            $('.faqs .short-info').slideUp();
        }
    });


    $('a[href^="#"]').on('click', function (event) {
        var target = $(this.getAttribute('href'));
        var headerHeight = $('.page-header').outerHeight(true);
        if (target.length) {
            event.preventDefault();
            $('html, body').stop().animate({
                scrollTop: target.offset().top - headerHeight - 30
            }, 1000);
        }
    });

    $('.nav-toggle').click(function () {
        if (!$('.nav-toggle').hasClass('active')) {
            $('.nav-toggle').addClass('active');
            $('html').addClass('before-menu-open');
            setTimeout(function () {
                $('html').addClass('menu-open');
            }, 30);
        } else {
            $('.nav-toggle').removeClass('active');
            $('html').removeClass('menu-open');
            setTimeout(function () {
                $('nav li').removeClass('show-menu-child');
                $('html').removeClass('before-menu-open sub-menu-opened');
            }, 400);
        }
    });


    doneResizing();
    var resizeId;
    $(window).resize(function () {
        clearTimeout(resizeId);
        resizeId = setTimeout(doneResizing, 25);
    });
    $(window).bind('orientationchange', function () {
        doneResizing();
    });

    $(".zoom-in").on("click", function(){
        $(".slick-active .catalogue-product").find("a[data-fancybox='gallery']").trigger('click');
    });

    /*--------------- Ingredients Glossary tabbing js starts --------------*/
    $('.glossary-index li').click(function () {
        var tab_id = $(this).attr('id');
        $('.glossary-index li').removeClass('active');
        $('.glossary-detail ul').removeClass('active');

        $(this).addClass('active');
        $('ul[data-type='+tab_id+']').addClass('active');
    });
    /*--------------- Ingredients Glossary tabbing js ends --------------*/

});

function doneResizing() {
    isResizing = true;


    isResizing = false;
}

var browserMobile = false;
if ($('body').hasClass('layout-mobile'))
    browserMobile = true;
$(window).scroll(function () {
    scrollContent();
});



function scrollContent() {
    var $toLoad = $('.to-load');
    var $toLoadElement = $('.to-load-element');
    if (browserMobile)
        $('.to-load').addClass('loaded');
    $('.to-load-element').addClass('loaded');
    if (browserMobile) {
        newScroll = $(window).scrollTop();
    } else {
        if (window.scrollY > 0) {
            newScroll = window.scrollY;
        } else {
            newScroll = $('html,body').scrollTop();
        }
    }
    if (!browserMobile) {
        $toLoad.each(function () {
            var object = $(this);
            if (newScroll + $(window).height() * 1.05 > $(this).offset().top) {
                object.removeClass('no-anim');
                object.addClass('loaded');
            } else if (newScroll + $(window).height() < $(this).offset().top) {
                object.addClass('no-anim');
                object.removeClass('loaded');
            }
        });
        $toLoadElement.each(function () {
            var object = $(this);
            if (newScroll + $(window).height() * 1.05 > $(this).offset().top) {
                object.removeClass('no-anim');
                object.addClass('loaded');
            } else if (newScroll + $(window).height() < $(this).offset().top) {
                object.addClass('no-anim');
                object.removeClass('loaded');
            }
        });
    } else {
        $('.to-load').addClass('loaded');
        $('.to-load-element').addClass('loaded');
    }
    currentScroll = newScroll;
}

function whichBrs() {
    var agt = navigator.userAgent.toLowerCase();
    if (agt.indexOf('opera') != -1)
        return 'Opera';
    if (agt.indexOf('staroffice') != -1)
        return 'Star Office';
    if (agt.indexOf('webtv') != -1)
        return 'WebTV';
    if (agt.indexOf('beonex') != -1)
        return 'Beonex';
    if (agt.indexOf('chimera') != -1)
        return 'Chimera';
    if (agt.indexOf('netpositive') != -1)
        return 'NetPositive';
    if (agt.indexOf('phoenix') != -1)
        return 'Phoenix';
    if (agt.indexOf('firefox') != -1)
        return 'Firefox';
    if (agt.indexOf('chrome') != -1)
        return 'Chrome';
    if (agt.indexOf('safari') != -1)
        return 'Safari';
    if (agt.indexOf('skipstone') != -1)
        return 'SkipStone';
    if (agt.indexOf('msie') != -1)
        return 'Internet Explorer';
    if (agt.indexOf('netscape') != -1)
        return 'Netscape';
    if (agt.indexOf('mozilla/5.0') != -1)
        return 'Mozilla';
    if (agt.indexOf('/') != -1) {
        if (agt.substr(0, agt.indexOf('/')) != 'mozilla') {
            return navigator.userAgent.substr(0, agt.indexOf('/'));
        } else
            return 'Netscape';
    } else if (agt.indexOf(' ') != -1)
        return navigator.userAgent.substr(0, agt.indexOf(' '));
    else
        return navigator.userAgent;
}

$(window).load(function () {
    $(window).trigger('resize');
    $('html').addClass('loaded');
    /*--- Site Loader---*/
    $('#main-wrap').animate({
        'opacity': '1'
    }, 500, function () {
        $('.pageLoader').fadeOut();
    });
});